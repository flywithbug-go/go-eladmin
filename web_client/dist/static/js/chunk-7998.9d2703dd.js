(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7998"],{MwSi:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAM4ElEQVR4Xu3dW4hdVxkH8O+bY5qLJoimFYS2IILSF6WmNCYyc9YmWJnmQVr6IAhaqZeKffGChnpp0FhFoYK31huo6EMIWKkGLdOzzoQ4RE2pL4Lii1pFtC1IEpzJ9ZOdzJDJ5Fz2Xpe9vr3Xf16zv3X5f+uXs8+ZM+cw4QcJIIGxCTCyQQJIYHwCAILTgQQmJAAgOB5IAEBwBpCAWwJ4BHHLDVWZJAAgmTQa23RLAEDcckNVJgkASCaNxjbdEgAQt9xQlUkCAJJJo7FNtwQAxC03VGWSAIBk0mhs0y0BAHHLDVWZJAAgmTQa23RLAEDcckNVJgmwtbafyV6xTSRQO4ESiNSuQgESyCQBAMmk0dimWwIA4pYbqjJJAEAyaTS26ZYAgLjlhqpMEgCQTBqNbbolACBuuaEqkwQAJJNGY5tuCQCIW26oyiQBAMmk0dimWwIA4pYbqjJJAEAyaTS26ZYAgLjlhqpMEgCQTBqNbbolACBuuaEqkwQAJJNGY5tuCXgDEZFFZn7EbXpUIYF4CYjIQWae9ZnBGwgRHTHG3OezCNQigRgJWGuPENG9PmMDiE96qFWdAICobg8WlzoBAEndAcyvOgEAUd0eLC51AgCSugOYX3UCAKK6PVhc6gQAJHUHML/qBABEdXuwuNQJAEjqDmB+1QkAiOr2YHGpEwCQ1B3A/KoTABDV7cHiUicAIKk7gPlVJwAgqtuDxaVOAEBSdwDzq04AQFS3J4/FnThxYsfKysrdIlL+3cXriGiniNzEzJeI6CUiepGI/iIiT27btu0Xu3fvPtVUMgDSVNKY57oEjh07dtvFixcPEdHdRLSpSkQico6ZnxKRh4ui+HOVGp9rAMQnPdQ6JXD8+PFbzp079ygzv4uInL4EVkQuMfNPieiAMeYfTgupUAQgFULCJeESsNa+mYieJqIbA436AhG93Rjzh0DjXTMMgMRIFWOOTMBau09Efs7M20JGJCL/I6L5oigWQ45bjgUgoRPFeCMTGA6Hd4jIb6o+13CI8Xyv13vb7Ozs7xxqx5YASMg0MdbIBBYXF2++dOnSswFvq8Yl/UKv13vT7Ozsv0K1AkBCJYlxRiawtLS0dWVl5SQz39ZQRM8tLy+/dX5+/myI+QAkRIoYY9ItyueJ6NMNR3TQGBPkgwgBpOHO5TTdwsLCq2dmZv7GzC9veN9niOhmY8x/fecFEN8EUT82geFweEBEvpgook8ZY77sOzeA+CaI+rEJDAaDE8x8Z4qIRGSpKIq9vnMDiG+CqB+ZQHl71ev1yl/iOf2mPECsQkQ3GWPK93E5/wCIc3QonJSAtXY/ET2VMiUR2V8UxS991gAgPumhdtLt1YeZ+ZuJI3rQGPO4zxoAxCc91I5NwFr7JSL6ZOKIDhljvF5iBpDEHezq9NbaHxPRu1PuT0R+VBTFe3zWACA+6aF20i3WE8z8gcQRPW6MedBnDQDikx5qJ91ilb/J/lzKiJj5s/1+v/xNvvMPgDhHh8Ipr2J9iIi+nTilB4wx3/dZA4D4pIfaSbdYb2HmkykjmpmZuX1ubu45nzUAiE96G2qtta8M8f6fgEtKOtRgMPgnM782xSJE5O9FUdzqOzeA+Ca4Wm+tfSMRHWPmh/v9/ncDDdvqYay1Xyeij6TYhIg8VhTFR33nBhDfBK/8WeZlHGt/EFS+egMkRIPB4A1E9Edm7gWIufIQInKRmV9vjPlr5aIxFwKIZ4IbcawNByRXkrDWlo+mD3jGXLf8CWNM+SKB9w+AeEQ4DgeQXA11YWHhNb1er/yffItH1HVKV2644YZb9+7d+586ReOuBRDHFKfhAJKrwVprm3zJ973GmB86tvW6MgBxSLIqDiC5Gu5gMPgBM9/vEHedEu/fnG+cDEDqxD/iCXnV8tyfk5w8eXLT6dOny7e/31U1szrXicjTO3bs2L9r167zdeqmXQsg0xJa9+91Hzk2Dp07ksOHD/d27tz5GDM/VCP2Kpd+rd/vf2z1w66rXF/5GgCpGJUvDtxuXQ16OBzeLyLfIaKXVYx/5GWrH2T9PmPMT3zGmVQLIBWSDYUDSK6GvfoB1uWT9w8y86sqtGH9JeWf0X5vZmbmW3Nzc8/XrK11OYBMiSs0DiC5NvDyucmpU6cKIrqHme8pvxtkVEtE5N9EVH6u78+2b9/+TOjnGuOOAYBMABILB5CMD738Mp3z58/vvHDhQvkFOhd7vd5LmzZterHJL81ZvzoAGdOr2DiApNadTrKLAWRE9E3hAJJk577yxACyIaqmcayb/iFjzDcqdw4XNpIAgKyLOSGOtVUASSPHvvokALKalQIcQFL93DZ2JYB4vH0kYpfwSBIx3DpDZw9E0SPHxr4BSZ2THOnarIEoxoHbrUgHvu6w2QJpAQ4gqXuaI1yfJZAW4QCSCIe+zpDZAWkhDiCpc6IDX5sVkMg4zojIO5n5USK6I3CfgCRSoNOGzQZIAzj2FUXxW2vtK4hoACTTjp7/vzfxQX1ZAGkKx1rLgcT/8E8bYTgcvl9EDhHRrDHmT9Oud/33zgNpGgeQuB7F6nWrOMq/SCx/yu9BjIak00BS4QCS6oe97pUbcKyVR0PSWSCpcQBJ3aM//foxOKIi6SQQLTiAZPqhr3rFFBzRkHQOiDYcQFKVwPjrKuKIgqRTQLTiABJ3JNba8usTyq9RqPMT7DlJZ4BoxwEkdc73lWsdcQR9JOkEkLbgAJLqSDxxBEPSeiBtwwEk05EEwhEESauBtBUHkIxHEhiHN5LWAmk7DiC5HkkkHF5IWgmkKzjWIxGRXzPznuk3IE5XqP/z3cg4nJG0DkjXcKx1bmlpaevKyspCRCSfMMZ81YlX5KKGcDghaRWQruLIGUnDOGojaQ2QruPIEUkiHLWQtAJILjhyQpIYR2Uk6oHkhiMHJEpwVEKiGkiuOLqMRBmOqUjUAskdRxeRWGs/TkRfifyimOvwI9/gqBIIcFzb4y68BKwcx9hHEnVAgGP0f4BtRtISHCORqAICHJPvDtqIpGU4rkOiBggRfYaIjhHRja43kRPqyg91u/y5VRHGbnTINiGJjOP3InKAmZ8kovKzyEL/XH5OQkRfIKJ7fQZna634DCAizzLzLcBRLcU2IImNg4gKY8yZwWBwJzMvxEIiIs8z8+3VOjP6Km8gPpNPqe3MI8fGfWpG0hSOtUwiI/E+nlqBdBaH5peAm8bRBiQagXQeh0YkqXBoR6INSDY4NCFJjUMzEk1AssOhAUlMHCKyxMx3lU/Iqz4Z0PacRAuQbHGkRBIbx5YtW/bt2bNnuSoOjY8kGoBkjyMFEq04tCFJDQQ4Nvz32sRLwKtTRnnjYXlb5frIsfGRRsPtVkogwDHm3qMBJHXveipdHxKHlkeSVECAY8qRaxuSGDg0IEkBBDgq/X9M1BYkMXGkRtI0EOCoiGP9E/ezZ88eJaJ+zdJGLm8CR0okTQIBDscje/To0c1bt279lTYkTeJIhaQpIMDhiGOtTBuSFDhSIGkCCHB44tCGJCWOppHEBgIcgXBoQaIBR5NIYgIBjsA4UiPRhKMpJLGAAEckHKmQaMTRBJIYQIAjMo4ESIabN2+ed3njYUNRUKy3pYQGAhxNnYjVeRp4dWu4vLz8jvn5+bMNb632dDGQhAQCHLVbGqYgIpLW4Ih1uxUKCHCEOevOo0RA0jocMZCEAAIczsc6bGFAJK3FERpJCCBHjDH3hW01RnNNIACS1uNYy07NJysCiOtxjlPngaQzOMpkASTO+erEqA5IOoUDQDpxjONuogaSzuEAkLhnqzOjV0DSSRwA0pkjHH8jE5B0FgeAxD9XnZphBJJO4wCQTh3fZjazDgm15e0jPsngVSyf9DKttdZuKbdujFnpegQA0vUOY39eCQCIV3wo7noCANL1DmN/XgkAiFd8KO56AgDS9Q5jf14JAIhXfCjuegIA0vUOY39eCQCIV3wo7noCANL1DmN/XgkAiFd8KO56AgDS9Q5jf14JAIhXfCjuegIqgIjIIjM/0vWwsb/2JSAiB5l51mflIT7VxGd+1CIB1QkAiOr2YHGpEwCQ1B3A/KoTABDV7cHiUicAIKk7gPlVJwAgqtuDxaVOAEBSdwDzq04AQFS3B4tLnQCApO4A5ledAICobg8WlzoBAEndAcyvOgEAUd0eLC51AgCSugOYX3UCAKK6PVhc6gQAJHUHML/qBABEdXuwuNQJlED6qReB+ZGA1gRY68KwLiSgIQEA0dAFrEFtAgCitjVYmIYEAERDF7AGtQkAiNrWYGEaEgAQDV3AGtQmACBqW4OFaUgAQDR0AWtQmwCAqG0NFqYhAQDR0AWsQW0CAKK2NViYhgQAREMXsAa1CQCI2tZgYRoSABANXcAa1CYAIGpbg4VpSABANHQBa1CbwP8BM8tWQTJjb4UAAAAASUVORK5CYII="},Mz3J:function(t,e,i){"use strict";Math.easeInOutQuad=function(t,e,i,a){return(t/=a/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e};var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function n(t,e,i){var n=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,r=t-n,o=0;e=void 0===e?500:e;!function t(){o+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(o,n,r,e)),o<e?a(t):i&&"function"==typeof i&&i()}()}var r={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&n(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&n(0,800)}}},o=(i("yiRf"),i("KHd+")),s=Object(o.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[i("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},[],!1,null,"14d4e208",null);s.options.__file="index.vue";e.a=s.exports},Va2t:function(t,e,i){},WCEk:function(t,e,i){},hgcN:function(t,e,i){"use strict";i.r(e);var a=i("FyfS"),n=i.n(a),r=i("jXb0"),o=i("Mz3J"),s=i("tWJv"),u=i("xGbm"),p=i("XJYT"),l={name:"MetaData",components:{ElTableFooter:i.n(p).a,fixedButton:r.a,Pagination:o.a},data:function(){return{listLoading:!0,list:null,total:10,dialogFormVisible:!1,dialogStatus:"create",dialogEditCount:0,imagePlaceHolder:i("MwSi"),textMap:{update:this.$t("application.table_edit"),create:this.$t("application.table_add")},temp:{id:0,version:"",parent_version:"",platform:[],approval_time:void 0,lock_time:void 0,gray_time:void 0,create_time:void 0,release_time:void 0,status:0,app_status:"",app_id:0},listQuery:{page:0,limit:10,name:"",owner:"",sort:"-id",app_id:0},simpleAppList:null,currentSimpleApp:null,platformOptions:[{value:"iOS",label:"iOS"},{value:"Android",label:"Android"},{value:"H5",label:"H5"},{value:"Server",label:"Server"}],statusOptions:[{value:"1",label:this.$t("selector.preparing")},{value:"2",label:this.$t("selector.developing")},{value:"3",label:this.$t("selector.gray")},{value:"4",label:this.$t("selector.release")}],rules:{version:[{required:!0,message:"必填,格式:1.0.0",trigger:"blur"},{pattern:/^\d+(.)\d+(.)\d+$/,message:"输入格式1.0.0,只能是`数字`和 `.`",trigger:"blur"}],approval_time:[{required:!0,message:"必选",trigger:"change"}],lock_time:[{required:!0,message:"必选",trigger:"change"}],gray_time:[{required:!0,message:"必选",trigger:"change"}],platform:[{required:!0,message:"必选",trigger:"change"}]}}},watch:{temp:{handler:function(){"update"===this.dialogStatus&&this.dialogEditCount++},deep:!0}},created:function(){this.getSimpleAppList()},methods:{getSimpleAppList:function(){var t=this;this.listLoading=!0,Object(s.e)().then(function(e){t.simpleAppList=e.list,t.currentSimpleApp=t.simpleAppList[0],t.listQuery.app_id=t.currentSimpleApp.id,t.getList()})},getList:function(){var t=this;Object(s.c)(this.listQuery).then(function(e){t.list=e.list,t.total=e.total,t.listLoading=!1}).catch(function(){t.listLoading=!1})},formatStatusString:function(t){switch(t+1){case 1:return this.$t("selector.preparing");case 2:return this.$t("selector.developing");case 3:return this.$t("selector.gray");case 4:return this.$t("selector.release");case 5:return this.$t("selector.workDone");default:return"title undefined"}},formatStatusButtonConfirmString:function(t){return this.$t("selector.confirmChange")},formatTagString:function(t){switch(t){case 1:return"";case 2:return"success";case 3:return"warning";case 4:return"danger";case 5:return"info"}return""},deleteVersionPopover:function(t){t.pop_de_status=!1,this.removeAppVersion(t)},cancelPopover:function(t){t.pop_status=!1,t.pop_de_status=!1},confirmPopover:function(t){t.pop_status=!1,this.updateStatus(t)},formatPlatform:function(t){return t?t.join(","):"-"},formatDate:function(t){if(!t||0===t)return"-";var e=new Date(1e3*t);return Object(u.a)(e,"yyyy-MM-dd")},resetTemp:function(){this.temp={id:0,version:"",parent_version:"",platform:[],approval_time:void 0,lock_time:void 0,gray_time:void 0,create_time:void 0,status:0,app_status:"",app_id:1e4}},handleTempTime:function(t){return{id:t.id,version:t.version,parent_version:t.parent_version,platform:t.platform?t.platform:[],approval_time:t.approval_time?new Date(1e3*t.approval_time):new Date,lock_time:t.lock_time?new Date(1e3*t.lock_time):new Date,gray_time:t.gray_time?new Date(1e3*t.gray_time):new Date,create_time:t.create_time?new Date(1e3*t.create_time):new Date,release_time:t.release_time?new Date(1e3*t.release_time):0,status:t.status,app_status:t.app_status,app_id:t.app_id}},removeAppVersion:function(t){var e=this;Object(s.f)(t.id).then(function(){e.getList()})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){if(t.temp.approval_time>t.temp.lock_time)return void t.$message.error("立项时间必须早于锁版时间");if(t.temp.lock_time>t.temp.gray_time)return void t.$message.error("锁版时间必须早于灰度时间");Object(s.a)(t.listQuery.app_id,t.temp.version,t.temp.parent_version,t.temp.platform,t.temp.approval_time.valueOf()/1e3,t.temp.lock_time.valueOf()/1e3,t.temp.gray_time.valueOf()/1e3).then(function(e){t.list.unshift(e.app),t.dialogFormVisible=!1,t.resetTemp(),t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})})}})},updateStatus:function(t){var e=this;Object(s.i)(t.id,t.status+1).then(function(){e.getList(),e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})})},updateDate:function(){var t=this;this.dialogEditCount<1?this.dialogFormVisible=!1:this.$refs.dataForm.validate(function(e){if(e){var i=parseInt("0"),a=parseInt("0"),r=parseInt("0"),o=parseInt("0"),u=t.temp.parent_version;if(t.temp.lock_time=t.temp.lock_time.getTime()/1e3,t.temp.gray_time=t.temp.gray_time.getTime()/1e3,t.temp.approval_time=t.temp.approval_time.getTime()/1e3,t.temp.status<2&&(r=t.temp.approval_time),t.temp.status<3&&(a=t.temp.lock_time,t.temp.approval_time>t.temp.lock_time))return void t.$message.error("立项时间必须早于锁版时间");if(t.temp.status<4&&(i=t.temp.gray_time,t.temp.lock_time>t.temp.gray_time))return void t.$message.error("锁版时间必须早于灰度时间");if(5==t.temp.status){if(t.temp.gray_time>t.temp.release_time&&t.temp.status>=4)return void t.$message.error("灰度时间必须早于发布时间");t.temp.release_time=t.temp.release_time.valueOf()/1e3,o=t.temp.release_time}"-"===t.temp.parent_version&&(u=""),Object(s.g)(t.temp.id,t.temp.app_id,t.temp.version,u,t.temp.platform,r,a,i,o).then(function(){var e=!0,i=!1,a=void 0;try{for(var r,o=n()(t.list);!(e=(r=o.next()).done);e=!0){var s=r.value;if(s.id===t.temp.id){var u=t.list.indexOf(s);t.list.splice(u,1,t.temp);break}}}catch(t){i=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw a}}t.resetTemp(),t.dialogFormVisible=!1,t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3})})}})},handleCreate:function(){var t=this;"update"===this.dialogStatus&&this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},handleUpdate:function(t){var e=this;this.temp=this.handleTempTime(t),this.dialogStatus="update",this.dialogFormVisible=!0,this.dialogEditCount=-1,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},sortChange:function(t){var e=t.prop,i=t.order;"id"===e&&this.sortByID(i)},sortByID:function(t){this.listQuery.sort="ascending"===t?"+_id":"-_id",this.handleFilter()},handleFilter:function(){var t=this;this.currentSimpleApp=this.simpleAppList.filter(function(e){return e.id==t.listQuery.app_id})[0],this.listQuery.page=1,this.getList()}}},c=(i("nHLZ"),i("KHd+")),d=Object(c.a)(l,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-container"},[e("section",{staticClass:"content"},[e("fixed-button",{staticClass:"fixed-container",attrs:{bottom:3},on:{clickEvent:this.handleCreate}},[e("svg-icon",{staticClass:"icon-add",attrs:{"icon-class":"add"}})],1)],1)])},[],!1,null,"09b491b6",null);d.options.__file="role.vue";e.default=d.exports},jXb0:function(t,e,i){"use strict";var a={name:"fixedButton",props:{bottom:{type:Number,default:3}},data:function(){return{transition:!0,timer:null}},methods:{event:function(){this.$emit("clickEvent")},handleScroll:function(){var t=this;this.transition=!1,this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.transition=!0},1400)}},mounted:function(){window.addEventListener("scroll",this.handleScroll)}},n=(i("lOda"),i("KHd+")),r=Object(n.a)(a,function(){var t=this.$createElement;return(this._self._c||t)("section",{staticClass:"fixed-button",class:[this.transition?"":"fixed-transition"],style:{bottom:this.bottom+"rem"},on:{click:this.event}},[this._t("default")],2)},[],!1,null,"4f67669e",null);r.options.__file="index.vue";e.a=r.exports},lOda:function(t,e,i){"use strict";var a=i("Va2t");i.n(a).a},nHLZ:function(t,e,i){"use strict";var a=i("WCEk");i.n(a).a},nUB0:function(t,e,i){},tWJv:function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"d",function(){return r}),i.d(e,"e",function(){return o}),i.d(e,"h",function(){return s}),i.d(e,"c",function(){return u}),i.d(e,"a",function(){return p}),i.d(e,"g",function(){return l}),i.d(e,"f",function(){return c}),i.d(e,"i",function(){return d});var a=i("bNJ/");function n(t){var e={bundle_id:t.bundle_id,icon:t.icon,name:t.name,desc:t.desc};return Object(a.a)({url:"/app/add",method:"post",data:e})}function r(t){return Object(a.a)({url:"/app/list",method:"get",params:t})}function o(){return Object(a.a)({url:"/app/list/simple",method:"get"})}function s(t){var e={icon:t.icon,name:t.name,desc:t.desc,id:t.id};return Object(a.a)({url:"/app/update",method:"post",data:e})}function u(t){return Object(a.a)({url:"/app/version/list",method:"get",params:t})}function p(t,e,i,n,r,o,s){var u={app_id:t,version:e,parent_version:i,platform:n,approval_time:r,lock_time:o,gray_time:s};return Object(a.a)({url:"/app/version/add",method:"post",data:u})}function l(t,e,i,n,r,o,s,u,p){var l={id:t,app_id:e,version:i,parent_version:n,platform:r,approval_time:o,lock_time:s,gray_time:u,release_time:p};return Object(a.a)({url:"/app/version/update",method:"post",data:l})}function c(t){var e={id:t};return Object(a.a)({url:"/app/version/remove",method:"post",data:e})}function d(t,e){var i={id:t,status:e};return Object(a.a)({url:"/app/version/update",method:"post",data:i})}},xGbm:function(t,e,i){"use strict";function a(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var a in i)if(new RegExp("("+a+")").test(e)){var r=i[a]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?r:n(r))}return e}function n(t){return("00"+t).substr(t.length)}i.d(e,"a",function(){return a})},yiRf:function(t,e,i){"use strict";var a=i("nUB0");i.n(a).a}}]);